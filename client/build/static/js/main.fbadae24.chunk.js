(this["webpackJsonpcreate-react-express-jwt-client"]=this["webpackJsonpcreate-react-express-jwt-client"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},134:function(e,t){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),l=a(14),i=a.n(l),u=(a(95),a(68)),s=a(5),m=a(7),d=a(4),g=a(17),h=a(27),f=a(28),v=a(40),E=a.n(v),p=function(){function e(){var t=this;Object(h.a)(this,e),this.login=function(e,a){return i.a.post("api/login",{email:e,password:a}).then((function(e){return t.setToken(e.data.token),e}))},this.getProfile=function(){return E()(t.getToken())}}return Object(f.a)(e,[{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return E()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"setToken",value:function(e){i.a.defaults.headers.common.Authorization="Bearer ".concat(e),localStorage.setItem("id_token",e)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"logout",value:function(){i.a.defaults.headers.common.Authorization=null,localStorage.removeItem("id_token"),window.location.reload("/")}}]),e}(),b=Object(n.createContext)(),j=new p,w=function(e){e.value;var t=Object(g.a)(e,["value"]),a=j.loggedIn(),c=Object(n.useState)(a?j.getProfile():null),o=Object(s.a)(c,2),l=o[0],i=o[1];return r.a.createElement(b.Provider,Object.assign({value:{user:l,isLoggedIn:a,login:function(e,t){return j.login(e,t).then((function(){return i(j.getProfile())}))},logout:function(){return j.logout()}}},t))},O=function(){return Object(n.useContext)(b)};var y=function(e){return O().isLoggedIn?r.a.createElement(d.b,e):r.a.createElement(d.a,{to:"/signup"})};a(102);var k=function(e){return r.a.createElement("form",Object.assign({className:"LoginForm"},e))};var x=function(e){var t=e.id,a=e.labelText,n=Object(g.a)(e,["id","labelText"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:t},a),r.a.createElement("input",Object.assign({id:t},n)))},N={display:"flex",justifyContent:"center",flexDirection:"column",maxWidth:"20rem",margin:"0 auto"};var S=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(s.a)(o,2),i=l[0],u=l[1],g=O(),h=g.isLoggedIn,f=g.login,v=Object(d.g)();return h?r.a.createElement(d.a,{to:"/"}):r.a.createElement("div",{style:N},r.a.createElement("h1",null,"Login"),r.a.createElement(k,{onSubmit:function(e){e.preventDefault(),f(a,i).then((function(){return v.push("/profile")})).catch((function(e){alert(e.response.data.message)}))}},r.a.createElement(x,{id:"email",labelText:"Email",placeholder:"yourname@email.com",name:"email",type:"email",value:a,onChange:function(e){return c(e.target.value)}}),r.a.createElement(x,{id:"password",labelText:"Password",placeholder:"p@ssw0Rd!",name:"password",type:"password",value:i,onChange:function(e){return u(e.target.value)}}),r.a.createElement("button",{type:"submit"},"Submit")),r.a.createElement(m.b,{style:{marginTop:"1.5rem",textAlign:"center"},to:"/signup"}))},C=function(e){return i.a.get("/api/user/".concat(e))},T=function(e,t,a){return i.a.post("api/signup",{username:e,email:t,password:a})};var L=function(e){e.style;var t=Object(g.a)(e,["style"]);return r.a.createElement("div",Object.assign({style:{maxWidth:"30rem",margin:"0 auto",padding:"1rem"}},t))};var I=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(s.a)(o,2),i=l[0],u=l[1],d=O().user;return Object(n.useEffect)((function(){C(d.id).then((function(e){c(e.data.username),u(e.data.email)}))}),[d]),r.a.createElement(L,null,r.a.createElement("h1",null,"Your Profile"),r.a.createElement("p",null,"Username: ",a),r.a.createElement("p",null,"Email: ",i),r.a.createElement(m.b,{to:"/"},"Go home"))},B=a(16),P=a(18),W={maxWidth:"20rem",margin:"0 auto",display:"flex",justifyContent:"center",flexDirection:"column"};var D=function(){var e=Object(n.useState)({username:"",email:"",password:""}),t=Object(s.a)(e,2),a=t[0],c=t[1],o=O().isLoggedIn,l=Object(d.g)();if(o)return r.a.createElement(d.a,{to:"/"});var i=function(e){var t=e.target,n=t.name,r=t.value;c(Object(P.a)(Object(P.a)({},a),{},Object(B.a)({},n,r)))};return r.a.createElement("div",{style:W,className:"Signup"},r.a.createElement("h1",null,"Signup"),r.a.createElement(k,{onSubmit:function(e){e.preventDefault(),T(a.username,a.email,a.password).then((function(e){l.replace("/login")})).catch((function(e){return alert(e)}))}},r.a.createElement(x,{id:"username",labelText:"Username",placeholder:"username",name:"username",type:"text",onChange:i}),r.a.createElement(x,{id:"email",labelText:"Email",placeholder:"yourname@email.com",name:"email",type:"email",onChange:i}),r.a.createElement(x,{id:"pwd",labelText:"Password",placeholder:"p@ssw0Rd!",name:"password",type:"password",onChange:i}),r.a.createElement("button",{type:"submit"},"Submit")),r.a.createElement(m.b,{style:{marginTop:"1.5rem",textAlign:"center"},to:"/login"}))},F=a(66),V=a.n(F);a(103);var Y=function(){var e=O(),t=e.user,a=e.logout,n=Object(d.g)();return r.a.createElement("div",{className:"Home"},r.a.createElement("div",{className:"Home-header"},r.a.createElement("img",{src:V.a,className:"Home-logo",alt:"logo"}),r.a.createElement("h2",null,"Welcome ",t.email)),r.a.createElement("p",{className:"Home-intro"},r.a.createElement("button",{onClick:function(){return n.push("/profile")}},"Go to Profile"),r.a.createElement("button",{style:{marginLeft:"1em"},onClick:function(){return a()}},"Logout"),r.a.createElement("button",{style:{marginLeft:"1em"},onClick:function(){return n.push("/join")}},"Join a Game")))};a(104);function M(e){return r.a.createElement(m.c,Object.assign({className:"nav-item brand",exact:!0},e),"Artsy")}var H=function(){var e=O(),t=e.isLoggedIn,a=e.logout,n=[r.a.createElement(M,{key:"/",to:"/"})];return t?(n.push(r.a.createElement(m.c,{key:"join",className:"nav-item",to:"/join"},"Join")),n.push(r.a.createElement(m.c,{key:"profile",className:"nav-item",to:"/profile"},"Profile")),n.push(r.a.createElement("span",{key:"lougout",className:"nav-item",onClick:a},"Logout"))):(n.push(r.a.createElement(m.c,{key:"signup",className:"nav-item",to:"/signup"},"Sign Up")),n.push(r.a.createElement(m.c,{key:"login",className:"nav-item",to:"/login"},"Login"))),r.a.createElement("nav",{className:"Navbar"},n)},R=a(30),_=a.n(R),X=(a(137),a(69)),A=a(67),z=["Dog","Cat","Bird","Pig","Sheep","Duck","Elephant","Monkey","Turtle","Fish","Penguin","Frog","Fireplace","Sink","Washing machine","Microwave","Bookshelf","Dinner Table","Toaster","Bed","Mirror","Television","Computer","Car","Ice Cream","Tacos","Pizza","Soup","Sandwich","Chips","French Fries","Hamburger","City","Farm","Storm","Sunset","Forest","River","Winter","Valley","Beach","Mountains","Soccer","Basketball","Baseball","Volleyball","Hockey","Bowling","Tennis","Ice Skating","Gymnastics"];var J=function(e){Object(X.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={answer:z[Math.floor(Math.random()*z.length)]},n}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,this.state.answer))}}]),a}(n.Component),G=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),a=Object(n.useRef)();return Object(n.useEffect)((function(){var n=e.current,r=t.current,c=n.getContext("2d"),o=document.getElementsByClassName("color");console.log(o,"the colors"),console.log(r);for(var l={color:"black"},i=function(e){l.color=e.target.className.split(" ")[1]},u=0;u<o.length;u++)o[u].addEventListener("click",i,!1);var s=!1,m=function(e,t,r,o,l,i){if(c.beginPath(),c.moveTo(e,t),c.lineTo(r,o),c.strokeStyle=l,c.lineWidth=5,c.stroke(),c.closePath(),i){var u=n.width,s=n.height;a.current.emit("drawing",{x0:e/u,y0:t/s,x1:r/u,y1:o/s,color:l})}},d=function(e){s=!0,l.x=e.clientX||e.touches[0].clientX,l.y=e.clientY||e.touches[0].clientY},g=function(e){s&&(m(l.x,l.y,e.clientX||e.touches[0].clientX,e.clientY||e.touches[0].clientY,l.color,!0),l.x=e.clientX||e.touches[0].clientX,l.y=e.clientY||e.touches[0].clientY)},h=function(e){s&&(s=!1,m(l.x,l.y,e.clientX||e.touches[0].clientX,e.clientY||e.touches[0].clientY,l.color,!0))},f=function(e,t){var a=(new Date).getTime();return function(){var n=(new Date).getTime();n-a>=t&&(a=n,e.apply(null,arguments))}};n.addEventListener("mousedown",d,!1),n.addEventListener("mouseup",h,!1),n.addEventListener("mouseout",h,!1),n.addEventListener("mousemove",f(g,10),!1),n.addEventListener("touchstart",d,!1),n.addEventListener("touchend",h,!1),n.addEventListener("touchcancel",h,!1),n.addEventListener("touchmove",f(g,10),!1);var v=function(){n.width=window.innerWidth,n.height=window.innerHeight};window.addEventListener("resize",v,!1),v();a.current=_.a.connect("/"),a.current.on("drawing",(function(e){var t=n.width,a=n.height;m(e.x0*t,e.y0*a,e.x1*t,e.y1*a,e.color)}))}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"You Get To Draw: ",r.a.createElement(J,null)),r.a.createElement("h5",null,"Score: ____")),r.a.createElement("br",null),r.a.createElement("canvas",{ref:e,className:"whiteboard"}),r.a.createElement("div",{ref:t,className:"colors"},r.a.createElement("div",{className:"color red"}),r.a.createElement("div",{className:"color orange"}),r.a.createElement("div",{className:"color yellow"}),r.a.createElement("div",{className:"color green"}),r.a.createElement("div",{className:"color blue"}),r.a.createElement("div",{className:"color purple"}),r.a.createElement("div",{className:"color pink"}),r.a.createElement("div",{className:"color black"}),r.a.createElement("div",{className:"color brown"})))},U=a(168);a(138);var $=function(e){console.log("props: ",e);var t=function(t){e.changeState(Object(P.a)(Object(P.a)({},e.stateValue),{},Object(B.a)({},t.target.name,t.target.value)))};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column"},r.a.createElement(G,null)),r.a.createElement("div",{className:"column",id:"chatWindow"},r.a.createElement("h1",{id:"chatHeader"},"Chat"),r.a.createElement("hr",null),r.a.createElement("h1",{id:"logHeader"},"Chat Log"),r.a.createElement("div",{className:"render-chat",id:"chatLog"},r.a.createElement("div",{id:"chatBody"},e.chatValue.map((function(e,t){var a=e.name,n=e.message;return r.a.createElement("div",{key:t},r.a.createElement("p",null,a,": ",r.a.createElement("span",null,n)))})))),r.a.createElement("form",{onSubmit:e.sendMessage,id:"chatForm"},r.a.createElement("div",{className:"name-field",id:"nameField"},r.a.createElement(U.a,{name:"name",onChange:function(e){return t(e)},value:e.stateValue.name,id:"outlined-multiline-static",variant:"outlined",label:"Your Name*"})),r.a.createElement("div",{id:"messageField"},r.a.createElement(U.a,{name:"message",onChange:function(e){return t(e)},value:e.stateValue.message,id:"outlined-multiline-static",variant:"outlined",label:"Your Message*"})),r.a.createElement("button",{id:"chatButton"},"Send Message"))))},q=(a(139),function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(s.a)(o,2),i=l[0],u=l[1];return r.a.createElement("div",{className:"joinOuterContainer"},r.a.createElement("div",{className:"joinInnerContainer"},r.a.createElement("h1",{className:"heading"},"Join"),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Name",className:"joinInput",type:"text",onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Room",className:"joinInput mt-20",type:"text",onChange:function(e){return u(e.target.value)}})),r.a.createElement(m.b,{onClick:function(e){return a&&i?null:e.preventDefault()},to:"/chat?name=".concat(a,"&room=").concat(i)},r.a.createElement("button",{className:"button mt-20",type:"submit"},"Join Room"))))});var K=function(e){e.location;var t,a=Object(n.useState)({message:"",name:""}),c=Object(s.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)([]),g=Object(s.a)(i,2),h=g[0],f=g[1],v=Object(n.useState)(""),E=Object(s.a)(v,2),p=E[0],b=E[1],j=Object(n.useState)(""),O=Object(s.a)(j,2),k=O[0],x=O[1],N=Object(n.useState)(""),C=Object(s.a)(N,2),T=C[0],L=C[1],B=Object(n.useState)(0),P=Object(s.a)(B,2),W=P[0],F=P[1],V=Object(n.useState)(0),M=Object(s.a)(V,2),R=M[0],X=M[1];return Object(n.useEffect)((function(){t=_()("localhost:3001"),b(p),x(k),console.log(t),t.on("message",(function(e){var t=e.name,a=e.message;f([].concat(Object(u.a)(h),[{name:t,message:a}]))}))})),r.a.createElement(w,null,r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(H,null),r.a.createElement(d.d,null,r.a.createElement(y,{exact:!0,path:"/"},r.a.createElement(Y,null)),r.a.createElement(d.b,{exact:!0,path:"/login"},r.a.createElement(S,null)),r.a.createElement(d.b,{exact:!0,path:"/signup"},r.a.createElement(D,null)),r.a.createElement(y,{exact:!0,path:"/join",component:q},r.a.createElement(q,null)),r.a.createElement(y,{exact:!0,path:"/profile"},r.a.createElement(I,null)),r.a.createElement(d.b,{exact:!0,path:"/draw"},r.a.createElement(G,{changeContext:function(e){L(e)},changeWidth:function(e){F(e)},changeHeight:function(e){X(e)},contextValue:T,widthValue:W,heightValue:R})),r.a.createElement(d.b,{exact:!0,path:"/chat"},r.a.createElement($,{changeState:function(e){l(e)},changeName:function(e){b(e)},changeRoom:function(e){x(e)},changeChat:function(e){f(e)},stateValue:o,nameValue:p,roomValue:k,chatValue:h,sendMessage:function(e){e.preventDefault();var a=o.name,n=o.message;t.emit("message",{name:a,message:n}),l({message:n,name:a})}}))))))},Q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}localStorage.getItem("id_token")&&(i.a.defaults.headers.common.Authorization="Bearer ".concat(localStorage.getItem("id_token"))),o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");Q?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Z(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):Z(e)}))}}()},66:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},73:function(e,t,a){e.exports=a(140)},95:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.fbadae24.chunk.js.map